<div class="w-full">
  <h1 class="font-bold text-4xl text-[#FF6500] mb-4">Sales Data</h1>

<%= form_tag admin_sales_path, method: :get, class: "date-filter-form flex items-center space-x-4 bg-gray-800 p-4 rounded-lg shadow-md" do %>
  <div class="flex flex-col">
    <label for="start_date" class="text-white font-semibold mb-1">Start Date:</label>
    <%= date_field_tag :start_date, params[:start_date], class: "date-input px-3 py-2 border rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500" %>
  </div>

  <div class="flex flex-col">
    <label for="end_date" class="text-white font-semibold mb-1">End Date:</label>
    <%= date_field_tag :end_date, params[:end_date], class: "date-input px-3 py-2 border rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500" %>
  </div>

  <div>
    <%= submit_tag "Filter", class: "filter-button bg-orange-500 hover:bg-orange-600 text-white font-semibold px-4 py-2 rounded-lg shadow-md transition duration-200" %>
  </div>
  <%= link_to 'Download PDF', admin_download_pdf_sales_path, class: 'bg-[#FF6500] text-white px-4 py-2 rounded-md' %>
<% end %>



  <!-- Dropdown for selecting filter category -->
  <div class="mb-4">
    <label for="sales-filter" class="block text-lg font-medium text-[#1E3E62]">Filter by:</label>
    <select id="sales-filter" class="border-gray-500 rounded-md shadow-sm mt-1 block w-full py-2 px-3 bg-[#1E3E62] text-white focus:outline-none focus:border-[#FF6500] transition duration-200" onchange="filterSales()">
      <option value="all" class="bg-[#0B192C] text-white">All</option>
      <option value="brand" class="bg-[#0B192C] text-white">Brand</option>
      <option value="product" class="bg-[#0B192C] text-white">Product</option>
      <option value="paint-color" class="bg-[#0B192C] text-white">Paint Color</option>
      <option value="primary-color" class="bg-[#0B192C] text-white">Primary Color</option>
    </select>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
    <!-- Sales by Brand -->
    <div class="sales-category my-6 p-6 bg-[#1E3E62] text-gray-300 rounded-lg shadow-md" data-category="brand">
      <h2 class="text-xl font-semibold mb-4">Sales by Brand</h2>
      <table class="table-auto w-full text-left border-collapse">
        <thead class="bg-[#0B192C]">
          <tr>
            <th class="border border-gray-700 px-4 py-2">Brand</th>
            <th class="border border-gray-700 px-4 py-2">Total Sales</th>
          </tr>
        </thead>
        <tbody>
          <% @sales_data[:colors].each do |color, total| %>
            <tr class="bg-gray-800 hover:bg-[#FF6500] transition duration-200">
              <td class="border border-gray-700 px-4 py-2"><%= color %></td>
              <td class="border border-gray-700 px-4 py-2"><%= total %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <!-- Sales by Product -->
    <div class="sales-category my-6 p-6 bg-[#1E3E62] text-gray-300 rounded-lg shadow-md" data-category="product">
      <h2 class="text-xl font-semibold mb-4">Sales by Product</h2>
      <table class="table-auto w-full text-left border-collapse">
        <thead class="bg-[#0B192C]">
          <tr>
            <th class="border border-gray-700 px-4 py-2">Product</th>
            <th class="border border-gray-700 px-4 py-2">Total Sales (₱)</th>
          </tr>
        </thead>
        <tbody>
          <% @sales_data[:products].each do |product, total| %>
            <tr class="bg-gray-800 hover:bg-[#FF6500] transition duration-200">
              <td class="border border-gray-700 px-4 py-2"><%= product %></td>
              <td class="border border-gray-700 px-4 py-2">₱<%= total %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <!-- Sales by Paint Color -->
    <div class="sales-category my-6 p-6 bg-[#1E3E62] text-gray-300 rounded-lg shadow-md" data-category="paint-color">
      <h2 class="text-xl font-semibold mb-4">Sales by Paint Color</h2>
      <table class="table-auto w-full text-left border-collapse">
        <thead class="bg-[#0B192C]">
          <tr>
            <th class="border border-gray-700 px-4 py-2">Paint Color</th>
            <th class="border border-gray-700 px-4 py-2">Total Sales (₱)</th>
          </tr>
        </thead>
        <tbody>
          <% @sales_data[:paint_colors].each do |paint_color, total| %>
            <tr class="bg-gray-800 hover:bg-[#FF6500] transition duration-200">
              <td class="border border-gray-700 px-4 py-2"><%= paint_color %></td>
              <td class="border border-gray-700 px-4 py-2">₱<%= total %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <!-- Sales by Primary Color -->
    <div class="sales-category my-6 p-6 bg-[#1E3E62] text-gray-300 rounded-lg shadow-md" data-category="primary-color">
      <h2 class="text-xl font-semibold mb-4">Sales by Primary Color</h2>
      <table class="table-auto w-full text-left border-collapse">
        <thead class="bg-[#0B192C]">
          <tr>
            <th class="border border-gray-700 px-4 py-2">Primary Color</th>
            <th class="border border-gray-700 px-4 py-2">Total Sales (₱)</th>
          </tr>
        </thead>
        <tbody>
          <% @sales_data[:primary_colors].each do |primary_color, total| %>
            <tr class="bg-gray-800 hover:bg-[#FF6500] transition duration-200">
              <td class="border border-gray-700 px-4 py-2"><%= primary_color %></td>
              <td class="border border-gray-700 px-4 py-2">₱<%= total %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  

</div>

<script>
  function filterSales() {
    const selectedFilter = document.getElementById('sales-filter').value;
    const categories = document.querySelectorAll('.sales-category');

    categories.forEach(category => {
      if (selectedFilter === 'all') {
        category.style.display = 'block';
      } else if (category.dataset.category === selectedFilter) {
        category.style.display = 'block';
      } else {
        category.style.display = 'none';
      }
    });
  }
</script>
